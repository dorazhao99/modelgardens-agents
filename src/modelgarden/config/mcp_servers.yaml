# ---------------------------------------------------------------------------
# MCP Server Configuration
# ---------------------------------------------------------------------------
# This file declares all MCP servers that Precursor can connect to.
#
# It controls:
#   • Which servers are enabled
#   • How they are launched (Python entrypoints, CLI commands, etc.)
#   • Optional per-server environment variables
#   • Global allow/deny patterns to control which tool namespaces are exposed
#
# You should **not** need to modify Python code when adding a new MCP server.
# Simply clone or install the server, add its entry here, and it will be
# automatically loaded by `mcp_loader.loader.load_enabled_mcp_servers()`.
# ---------------------------------------------------------------------------

defaults:
  enabled: true
  allow_patterns: ["*"]   # allow ALL tool namespaces by default
  deny_patterns: []        # optional: add patterns like ["unsafe.*"] if needed

servers:
  # -------------------------------------------------------------------------
  # Google Drive MCP: interacts with files, folders, and documents.
  # Requires credentials/token files; specify their paths here or via env vars.
  # -------------------------------------------------------------------------
  - id: drive
    load: "python -m modelgarden.mcp_servers.drive.server"
    enabled: true
    env:
      GOOGLE_CREDENTIALS_JSON: "credentials.json"
      GOOGLE_TOKEN_PICKLE: "token.pickle"

  # -------------------------------------------------------------------------
  # Filesystem MCP: interacts with the local filesystem.
  # -------------------------------------------------------------------------

  - id: filesystem
    load: "npx -y @modelcontextprotocol/server-filesystem ~/Documents ~/Desktop"
    enabled: true

  # -------------------------------------------------------------------------
  # Coder MCP: launches the CodeAgent to complete coding tasks via OpenHands.
  # No special environment variables are required beyond GITHUB_TOKEN.
  # -------------------------------------------------------------------------
  - id: websearch
    load: "npx -y @brave/brave-search-mcp-server --transport stdio"
    enabled: true

  - id: slides
    load: "node src/modelgarden/mcp_servers/slides/src/index.js"
    enabled: true

  - id: fetch
    load: "python -m mcp_server_fetch --ignore-robots-txt --user-agent=Precursor/1.0"
    enabled: true

  # - id: websearch
  #   load: "npx -y mcp-remote https://mcp.tavily.com/mcp/?tavilyApiKey=$TAVILY_API_KEY"
  #   enabled: true