# ---------------------------------------------------------------------------
# MCP Server Configuration
# ---------------------------------------------------------------------------
# This file declares all MCP servers that Precursor can connect to.
#
# It controls:
#   • Which servers are enabled
#   • How they are launched (Python entrypoints, CLI commands, etc.)
#   • Optional per-server environment variables
#   • Global allow/deny patterns to control which tool namespaces are exposed
#
# You should **not** need to modify Python code when adding a new MCP server.
# Simply clone or install the server, add its entry here, and it will be
# automatically loaded by `mcp_loader.loader.load_enabled_mcp_servers()`.
# ---------------------------------------------------------------------------

defaults:
  enabled: true
  allow_patterns: ["*"]   # allow ALL tool namespaces by default
  deny_patterns: []        # optional: add patterns like ["unsafe.*"] if needed

servers:
  # -------------------------------------------------------------------------
  # GUM MCP: retrieves personal context (recent activity, reasoning traces)
  # USER_NAME is automatically injected from user.yaml by the loader.
  # -------------------------------------------------------------------------
  - id: gum
    load: "python -m precursor.mcp_servers.gum.server"
    enabled: true

  # -------------------------------------------------------------------------
  # Google Drive MCP: interacts with files, folders, and documents.
  # Requires credentials/token files; specify their paths here or via env vars.
  # -------------------------------------------------------------------------
  - id: drive
    load: "python -m precursor.mcp_servers.drive.server"
    enabled: true
    env:
      GOOGLE_CREDENTIALS_JSON: "credentials.json"
      GOOGLE_TOKEN_PICKLE: "token.pickle"

  # -------------------------------------------------------------------------
  # Filesystem MCP: interacts with the local filesystem.
  # -------------------------------------------------------------------------

  - id: filesystem
    load: "npx -y @modelcontextprotocol/server-filesystem ~/Documents ~/Desktop"
    enabled: true

  # -------------------------------------------------------------------------
  # Coder MCP: launches the CodeAgent to complete coding tasks via OpenHands.
  # No special environment variables are required beyond GITHUB_TOKEN.
  # -------------------------------------------------------------------------
  - id: coder
    load: "python -m precursor.mcp_servers.coder.server"
    enabled: true

  - id: websearch
    load: "npx -y @brave/brave-search-mcp-server --transport stdio"
    enabled: true